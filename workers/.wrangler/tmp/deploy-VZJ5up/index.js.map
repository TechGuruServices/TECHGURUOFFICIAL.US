{
  "version": 3,
  "sources": ["../../../src/chat.js", "../../../src/contact.js", "../../../src/subscribe.js", "../../../src/calendar.js", "../../../src/index.js"],
  "sourceRoot": "C:\\Users\\todo2\\Downloads\\techguru_premium_landing\\techguru_premium_landing\\landingpage-techguru\\workers\\.wrangler\\tmp\\deploy-VZJ5up",
  "sourcesContent": ["/**\r\n * Chat Endpoint Handler\r\n * Proxies requests to Anthropic Claude API\r\n *\r\n * Environment variables required:\r\n * - ANTHROPIC_API_KEY: Your Anthropic API key\r\n */\r\n\r\n/**\r\n * Comprehensive input sanitization for security\r\n * - Removes HTML/script tags\r\n * - Removes potential SQL injection patterns\r\n * - Removes null bytes and control characters\r\n * - Normalizes whitespace\r\n * - Limits length\r\n */\r\nconst sanitizeInput = (text) => {\r\n  if (typeof text !== 'string') return '';\r\n\r\n  let sanitized = text\r\n    // Remove HTML tags\r\n    .replace(/<[^>]*>/g, '')\r\n    // Remove script tags and content (extra protection)\r\n    .replace(/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi, '')\r\n    // Remove potential XSS event handlers\r\n    .replace(/on\\w+\\s*=\\s*(['\"]?).*?\\1/gi, '')\r\n    // Remove javascript: and data: URLs\r\n    .replace(/(?:javascript|data|vbscript):/gi, '')\r\n    // Remove null bytes and control characters (except newlines and tabs)\r\n    .replace(/[\\x00-\\x08\\x0B\\x0C\\x0E-\\x1F\\x7F]/g, '')\r\n    // Remove potential SQL injection patterns (basic protection)\r\n    .replace(/(\\b(SELECT|INSERT|UPDATE|DELETE|DROP|UNION|ALTER|CREATE|TRUNCATE)\\b)/gi, '')\r\n    // Normalize multiple spaces to single space\r\n    .replace(/\\s+/g, ' ')\r\n    // Trim whitespace\r\n    .trim();\r\n\r\n  // Limit to max 5000 characters\r\n  return sanitized.slice(0, 5000);\r\n};\r\n\r\n/**\r\n * Validate and sanitize request payload\r\n */\r\nconst validateChatRequest = (body) => {\r\n  // Check body exists\r\n  if (!body || typeof body !== 'object') {\r\n    return { valid: false, error: 'Invalid request body' };\r\n  }\r\n\r\n  // Check message exists\r\n  if (!body.message) {\r\n    return { valid: false, error: 'Message is required' };\r\n  }\r\n\r\n  // Check message is a string\r\n  if (typeof body.message !== 'string') {\r\n    return { valid: false, error: 'Message must be a string' };\r\n  }\r\n\r\n  const message = sanitizeInput(body.message);\r\n\r\n  if (message.length < 1) {\r\n    return { valid: false, error: 'Message cannot be empty' };\r\n  }\r\n\r\n  if (message.length > 5000) {\r\n    return { valid: false, error: 'Message exceeds 5000 character limit' };\r\n  }\r\n\r\n  // Check for suspicious patterns that might indicate abuse\r\n  const suspiciousPatterns = [\r\n    /\\{[\\s\\S]*\\}[\\s\\S]*\\{/,  // Multiple JSON-like objects (potential prompt injection)\r\n    /(system|assistant|user):\\s*\\n/i,  // Potential role injection\r\n    /ignore (previous|all|above) instructions/i,  // Common prompt injection\r\n  ];\r\n\r\n  for (const pattern of suspiciousPatterns) {\r\n    if (pattern.test(message)) {\r\n      console.warn('Suspicious pattern detected in message');\r\n      // Don't reject, but log for monitoring\r\n    }\r\n  }\r\n\r\n  return { valid: true, message };\r\n};\r\n\r\n/**\r\n * TechGuru AI System Prompt\r\n */\r\nconst SYSTEM_PROMPT = `You are the TechGuru AI Assistant. Be concise, professional, and helpful.\r\n\r\nCRITICAL RESPONSE LIMITS:\r\n- Keep ALL responses under 100 words maximum\r\n- Answers should be 2-4 sentences or 3-5 bullet points\r\n- No rambling or repetition\r\n- Direct and actionable always\r\n\r\nCOMPANY INFO:\r\nTechGuru, founded by Lucas Thompson, delivers enterprise-grade DevOps, AI & cloud automation for startups and solo founders. We create scalable, efficient solutions that grow with your business\u2014without the enterprise price tag.\r\n\r\nSERVICES & PRICING:\r\n\r\n1. AI Assistants & Automation Systems\r\n- Lite Build: $1,500\u2013$2,500\r\n- Pro Automations: $3,500\u2013$7,000\r\n- Enterprise Multi-Agent: $8,000\u2013$15,000\r\n\r\n2. Operations & Workflow Engineering\r\n- Audit Only: $1,000\u2013$1,800\r\n- Workflow Redesign: $2,500\u2013$5,500\r\n- Full Overhaul: $6,000\u2013$10,500\r\n\r\n3. Knowledge, SOP & Playbook Systems\r\n- SOP Starter: $1,200\u2013$1,800\r\n- Full Playbook System: $2,800\u2013$5,000\r\n- Enterprise Knowledge Base: $5,500\u2013$9,000\r\n\r\n4. Custom Micro-Tools & Internal Utilities\r\n- Simple Micro-App: $1,500\u2013$2,500\r\n- Advanced Tool: $3,500\u2013$6,000\r\n- Full Internal Suite: $7,000\u2013$12,000\r\n\r\n5. Strategic Technology & Product Consulting\r\n- Hourly Consulting: $125\u2013$250/hr\r\n- Tech Strategy Blueprint: $1,500\u2013$3,000\r\n- Full System Roadmap: $3,000\u2013$6,000\r\n\r\nPlus: Custom Projects tailored to your needs.\r\n\r\nYOUR ROLE:\r\n- Discover what visitors need and their business context\r\n- Recommend services that match their situation\r\n- Share relevant pricing ranges\r\n- Guide them to contact form for proposals\r\n- Be transparent: you are an AI assistant, not human staff\r\n\r\nDO:\r\n- Ask 1-2 focused discovery questions per reply\r\n- Provide brief, high-level guidance\r\n- Reference service tiers by name when relevant\r\n- Mention pricing ranges to set expectations\r\n- Suggest contacting for custom solutions\r\n\r\nDON'T:\r\n- Promise specific outcomes, timelines, or guarantees\r\n- Give legal/financial/tax advice\r\n- Ask for passwords, API keys, or sensitive data\r\n- Claim to be TechGuru staff\r\n- Give away full implementations\r\n\r\nTONE: Professional, confident, solution-oriented. Plain text only\u2014no markdown, emojis, asterisks, or special formatting.`;\r\n\r\n/**\r\n * Call Anthropic Claude API\r\n */\r\nconst callClaudeAPI = async (message, apiKey) => {\r\n  const url = 'https://api.anthropic.com/v1/messages';\r\n\r\n  const payload = {\r\n    model: 'claude-opus-4-1',\r\n    max_tokens: 1024,\r\n    system: SYSTEM_PROMPT,\r\n    messages: [\r\n      {\r\n        role: 'user',\r\n        content: message,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const controller = new AbortController();\r\n  const timeoutId = setTimeout(() => controller.abort(), 30000); // 30 second timeout\r\n\r\n  try {\r\n    const response = await fetch(url, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'x-api-key': apiKey,\r\n        'anthropic-version': '2023-06-01',\r\n      },\r\n      body: JSON.stringify(payload),\r\n      signal: controller.signal,\r\n    });\r\n\r\n    clearTimeout(timeoutId);\r\n\r\n    if (!response.ok) {\r\n      const errorText = await response.text();\r\n      console.error('Claude API HTTP Status:', response.status);\r\n      console.error('Claude API Raw Response:', errorText);\r\n\r\n      let errorData;\r\n      try {\r\n        errorData = JSON.parse(errorText);\r\n      } catch {\r\n        return { error: `API error (${response.status}): ${errorText}` };\r\n      }\r\n\r\n      console.error('Claude API Error Response:', JSON.stringify(errorData));\r\n\r\n      if (response.status === 401) {\r\n        return { error: 'API authentication failed. Please check your API key.' };\r\n      }\r\n\r\n      // Handle different error formats\r\n      const errorMessage = errorData.error?.message ||\r\n                          errorData.message ||\r\n                          JSON.stringify(errorData.error) ||\r\n                          JSON.stringify(errorData) ||\r\n                          'Failed to get response from AI service';\r\n\r\n      return { error: String(errorMessage) };\r\n    }\r\n\r\n    const data = await response.json();\r\n    const reply = data.content[0]?.text || 'No response generated';\r\n\r\n    return { reply };\r\n  } catch (error) {\r\n    clearTimeout(timeoutId);\r\n\r\n    if (error.name === 'AbortError') {\r\n      return { error: 'Request timed out. Please try again.' };\r\n    }\r\n\r\n    console.error('Chat API Error:', error);\r\n    return { error: 'An error occurred while processing your message. Please try again.' };\r\n  }\r\n};\r\n\r\n/**\r\n * Main chat handler\r\n */\r\nexport const handleChat = async (request, env, ctx, origin) => {\r\n  const corsHeaders = {\r\n    'Access-Control-Allow-Origin': origin,\r\n    'Access-Control-Allow-Methods': 'POST, OPTIONS',\r\n    'Access-Control-Allow-Headers': 'Content-Type',\r\n    'Content-Type': 'application/json',\r\n  };\r\n\r\n  try {\r\n    const body = await request.json();\r\n\r\n    // Validate input\r\n    const validation = validateChatRequest(body);\r\n    if (!validation.valid) {\r\n      return new Response(\r\n        JSON.stringify({ error: validation.error }),\r\n        { status: 400, headers: corsHeaders }\r\n      );\r\n    }\r\n\r\n    // Check for API key\r\n    const apiKey = env.ANTHROPIC_API_KEY;\r\n    if (!apiKey) {\r\n      console.error('ANTHROPIC_API_KEY not configured');\r\n      return new Response(\r\n        JSON.stringify({ error: 'Service is not properly configured' }),\r\n        { status: 500, headers: corsHeaders }\r\n      );\r\n    }\r\n\r\n    // Call Claude API\r\n    const result = await callClaudeAPI(validation.message, apiKey);\r\n\r\n    if (result.error) {\r\n      return new Response(\r\n        JSON.stringify({ error: result.error }),\r\n        { status: 503, headers: corsHeaders }\r\n      );\r\n    }\r\n\r\n    return new Response(\r\n      JSON.stringify({ reply: result.reply }),\r\n      { status: 200, headers: corsHeaders }\r\n    );\r\n  } catch (error) {\r\n    console.error('Chat Handler Error:', error);\r\n    return new Response(\r\n      JSON.stringify({ error: 'Invalid request format' }),\r\n      { status: 400, headers: corsHeaders }\r\n    );\r\n  }\r\n};\r\n", "/**\r\n * Contact Form Endpoint Handler\r\n * Validates form data, applies rate-limiting, sends emails via Zoho Mail\r\n * \r\n * Environment variables required:\r\n * - ZOHO_MAIL_API_KEY: Zoho Mail API key\r\n * - NOTIFICATION_EMAIL: Email to receive notifications (lucas@techguruofficial.us)\r\n * - REPLY_TO_EMAIL: Reply-to email (info@techguruofficial.us)\r\n * - SENDGRID_API_KEY (alternative): SendGrid API key for email\r\n */\r\n\r\n/**\r\n * Email validation regex (RFC 5322 simplified)\r\n */\r\nconst isValidEmail = (email) => {\r\n  const regex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n  return regex.test(email) && email.length <= 254;\r\n};\r\n\r\n/**\r\n * Sanitize text input - prevent XSS\r\n */\r\nconst sanitizeText = (text, maxLength = 1000) => {\r\n  if (typeof text !== 'string') return '';\r\n  \r\n  return text\r\n    .replace(/<[^>]*>/g, '') // Remove HTML tags\r\n    .replace(/[^\\w\\s\\-.,!?()']/g, '') // Remove special chars except basic punctuation\r\n    .trim()\r\n    .slice(0, maxLength);\r\n};\r\n\r\n/**\r\n * Validate contact form payload\r\n */\r\nconst validateContactRequest = (body) => {\r\n  const errors = [];\r\n\r\n  // Name validation\r\n  if (!body?.name || typeof body.name !== 'string') {\r\n    errors.push('Name is required');\r\n  } else if (body.name.length < 2 || body.name.length > 100) {\r\n    errors.push('Name must be between 2-100 characters');\r\n  }\r\n\r\n  // Email validation\r\n  if (!body?.email || !isValidEmail(body.email)) {\r\n    errors.push('Valid email address is required');\r\n  }\r\n\r\n  // Message validation\r\n  if (!body?.message || typeof body.message !== 'string') {\r\n    errors.push('Message is required');\r\n  } else if (body.message.length < 10 || body.message.length > 5000) {\r\n    errors.push('Message must be between 10-5000 characters');\r\n  }\r\n\r\n  // Subject validation (optional)\r\n  if (body?.subject && typeof body.subject === 'string') {\r\n    if (body.subject.length > 200) {\r\n      errors.push('Subject must be under 200 characters');\r\n    }\r\n  }\r\n\r\n  if (errors.length > 0) {\r\n    return { valid: false, errors };\r\n  }\r\n\r\n  return {\r\n    valid: true,\r\n    data: {\r\n      name: sanitizeText(body.name, 100),\r\n      email: body.email.toLowerCase().trim(),\r\n      message: sanitizeText(body.message, 5000),\r\n      subject: body.subject ? sanitizeText(body.subject, 200) : 'New TechGuru Contact Form Submission',\r\n    },\r\n  };\r\n};\r\n\r\n/**\r\n * Check rate-limiting using Cloudflare KV\r\n * Limit: 5 submissions per IP per hour\r\n */\r\nconst checkRateLimit = async (kv, clientIp) => {\r\n  const key = `ratelimit:contact:${clientIp}`;\r\n  const current = await kv.get(key, 'json') || { count: 0, timestamp: Date.now() };\r\n  \r\n  const oneHourAgo = Date.now() - 3600000;\r\n  \r\n  // Reset counter if outside 1-hour window\r\n  if (current.timestamp < oneHourAgo) {\r\n    await kv.put(key, JSON.stringify({ count: 1, timestamp: Date.now() }), { expirationTtl: 3600 });\r\n    return { allowed: true, remaining: 4 };\r\n  }\r\n\r\n  // Check if limit exceeded\r\n  if (current.count >= 5) {\r\n    return { allowed: false, remaining: 0, retryAfter: Math.ceil((current.timestamp + 3600000 - Date.now()) / 1000) };\r\n  }\r\n\r\n  // Increment counter\r\n  current.count++;\r\n  await kv.put(key, JSON.stringify(current), { expirationTtl: 3600 });\r\n  \r\n  return { allowed: true, remaining: 5 - current.count };\r\n};\r\n\r\n/**\r\n * Send emails via SendGrid (recommended for reliability)\r\n */\r\nconst sendEmailViaSendGrid = async (data, sendGridKey, notificationEmail, replyToEmail) => {\r\n  const url = 'https://api.sendgrid.com/v3/mail/send';\r\n\r\n  // Email to client (confirmation)\r\n  const clientEmail = {\r\n    personalizations: [\r\n      {\r\n        to: [{ email: data.email, name: data.name }],\r\n        subject: 'We received your inquiry - TechGuru',\r\n      },\r\n    ],\r\n    from: {\r\n      email: replyToEmail,\r\n      name: 'TECHGURU',\r\n    },\r\n    content: [\r\n      {\r\n        type: 'text/html',\r\n        value: `<h2>Thank you for contacting TechGuru!</h2>\r\n<p>Hi ${data.name},</p>\r\n<p>We received your message and will get back to you within 24 hours.</p>\r\n<p><strong>Your Message:</strong></p>\r\n<p>${data.message.replace(/\\n/g, '<br>')}</p>\r\n<p>Best regards,<br>TechGuru Team</p>`,\r\n      },\r\n    ],\r\n  };\r\n\r\n  // Email to admin (notification)\r\n  const adminEmail = {\r\n    personalizations: [\r\n      {\r\n        to: [{ email: notificationEmail, name: 'TechGuru Admin' }],\r\n        subject: `New Contact Form Submission: ${data.subject}`,\r\n      },\r\n    ],\r\n    from: {\r\n      email: replyToEmail,\r\n      name: 'TECHGURU',\r\n    },\r\n    replyTo: {\r\n      email: data.email,\r\n      name: data.name,\r\n    },\r\n    content: [\r\n      {\r\n        type: 'text/html',\r\n        value: `<h2>New Contact Form Submission</h2>\r\n<p><strong>Name:</strong> ${data.name}</p>\r\n<p><strong>Email:</strong> ${data.email}</p>\r\n<p><strong>Subject:</strong> ${data.subject}</p>\r\n<p><strong>Message:</strong></p>\r\n<p>${data.message.replace(/\\n/g, '<br>')}</p>\r\n<p><em>Sent at: ${new Date().toISOString()}</em></p>`,\r\n      },\r\n    ],\r\n  };\r\n\r\n  try {\r\n    // Send confirmation to client\r\n    const clientResponse = await fetch(url, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Authorization': `Bearer ${sendGridKey}`,\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(clientEmail),\r\n    });\r\n\r\n    if (!clientResponse.ok) {\r\n      const errorText = await clientResponse.text();\r\n      console.error(`SendGrid client email failed (${clientResponse.status}):`, errorText);\r\n      throw new Error(`SendGrid client email failed: ${clientResponse.status} - ${errorText}`);\r\n    }\r\n\r\n    // Send notification to admin\r\n    const adminResponse = await fetch(url, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Authorization': `Bearer ${sendGridKey}`,\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(adminEmail),\r\n    });\r\n\r\n    if (!adminResponse.ok) {\r\n      const errorText = await adminResponse.text();\r\n      console.error(`SendGrid admin email failed (${adminResponse.status}):`, errorText);\r\n      throw new Error(`SendGrid admin email failed: ${adminResponse.status} - ${errorText}`);\r\n    }\r\n\r\n    return { success: true };\r\n  } catch (error) {\r\n    console.error('SendGrid Email Error:', error);\r\n    return { success: false, error: error.message };\r\n  }\r\n};\r\n\r\n/**\r\n * Get client IP from request\r\n */\r\nconst getClientIp = (request) => {\r\n  return (\r\n    request.headers.get('CF-Connecting-IP') ||\r\n    request.headers.get('X-Forwarded-For')?.split(',')[0] ||\r\n    'unknown'\r\n  );\r\n};\r\n\r\n/**\r\n * Main contact handler\r\n */\r\nexport const handleContact = async (request, env, ctx, origin) => {\r\n  const corsHeaders = {\r\n    'Access-Control-Allow-Origin': origin,\r\n    'Access-Control-Allow-Methods': 'POST, OPTIONS',\r\n    'Access-Control-Allow-Headers': 'Content-Type',\r\n    'Content-Type': 'application/json',\r\n  };\r\n\r\n  try {\r\n    const body = await request.json();\r\n\r\n    // Validate request\r\n    const validation = validateContactRequest(body);\r\n    if (!validation.valid) {\r\n      return new Response(\r\n        JSON.stringify({ error: 'Validation failed', details: validation.errors }),\r\n        { status: 400, headers: corsHeaders }\r\n      );\r\n    }\r\n\r\n    // Check rate-limiting\r\n    const clientIp = getClientIp(request);\r\n    const rateLimit = await checkRateLimit(env.RATE_LIMIT, clientIp);\r\n    \r\n    if (!rateLimit.allowed) {\r\n      return new Response(\r\n        JSON.stringify({ \r\n          error: 'Too many submissions. Please try again later.',\r\n          retryAfter: rateLimit.retryAfter,\r\n        }),\r\n        { \r\n          status: 429, \r\n          headers: {\r\n            ...corsHeaders,\r\n            'Retry-After': rateLimit.retryAfter,\r\n          },\r\n        }\r\n      );\r\n    }\r\n\r\n    // Check for API keys\r\n    const sendGridKey = env.SENDGRID_API_KEY;\r\n    const adminEmail = env.ADMIN_EMAIL || 'info@techguruofficial.us';\r\n\r\n    if (!sendGridKey) {\r\n      console.error('SENDGRID_API_KEY not configured');\r\n      return new Response(\r\n        JSON.stringify({ error: 'Email service is not properly configured' }),\r\n        { status: 500, headers: corsHeaders }\r\n      );\r\n    }\r\n\r\n    // Send emails\r\n    await sendEmailViaSendGrid(\r\n      validation.data,\r\n      sendGridKey,\r\n      adminEmail,\r\n      adminEmail\r\n    );\r\n\r\n    // Success response\r\n    return new Response(\r\n      JSON.stringify({\r\n        success: true,\r\n        message: 'Thank you for your inquiry! We will contact you soon.',\r\n        remaining: rateLimit.remaining,\r\n      }),\r\n      { status: 200, headers: corsHeaders }\r\n    );\r\n  } catch (error) {\r\n    console.error('Contact Handler Error:', error);\r\n    return new Response(\r\n      JSON.stringify({ error: 'Invalid request format' }),\r\n      { status: 400, headers: corsHeaders }\r\n    );\r\n  }\r\n};\r\n", "/**\n * Subscribe Endpoint Handler\n * Handles newsletter/lead magnet subscriptions\n * Sends welcome email with starter kit links via SendGrid\n *\n * Environment variables required:\n * - SENDGRID_API_KEY: SendGrid API key for email\n * - ADMIN_EMAIL: Email to receive notifications\n */\n\n/**\n * Email validation regex (RFC 5322 simplified)\n */\nconst isValidEmail = (email) => {\n  const regex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return regex.test(email) && email.length <= 254;\n};\n\n/**\n * Validate subscribe request payload\n */\nconst validateSubscribeRequest = (body) => {\n  if (!body?.email || !isValidEmail(body.email)) {\n    return { valid: false, error: 'Valid email address is required' };\n  }\n\n  return {\n    valid: true,\n    data: {\n      email: body.email.toLowerCase().trim(),\n      source: body.source || 'lead-magnet',\n    },\n  };\n};\n\n/**\n * Check rate-limiting using Cloudflare KV\n * Limit: 3 subscriptions per IP per hour\n */\nconst checkRateLimit = async (kv, clientIp) => {\n  if (!kv) {\n    // If KV is not configured, allow the request but log a warning\n    console.warn('RATE_LIMIT KV namespace not configured');\n    return { allowed: true, remaining: 999 };\n  }\n\n  const key = `ratelimit:subscribe:${clientIp}`;\n  const current = await kv.get(key, 'json') || { count: 0, timestamp: Date.now() };\n\n  const oneHourAgo = Date.now() - 3600000;\n\n  // Reset counter if outside 1-hour window\n  if (current.timestamp < oneHourAgo) {\n    await kv.put(key, JSON.stringify({ count: 1, timestamp: Date.now() }), { expirationTtl: 3600 });\n    return { allowed: true, remaining: 2 };\n  }\n\n  // Check if limit exceeded\n  if (current.count >= 3) {\n    return { allowed: false, remaining: 0, retryAfter: Math.ceil((current.timestamp + 3600000 - Date.now()) / 1000) };\n  }\n\n  // Increment counter\n  current.count++;\n  await kv.put(key, JSON.stringify(current), { expirationTtl: 3600 });\n\n  return { allowed: true, remaining: 3 - current.count };\n};\n\n/**\n * Send welcome email with starter kit via SendGrid\n */\nconst sendWelcomeEmail = async (email, sendGridKey, replyToEmail) => {\n  const url = 'https://api.sendgrid.com/v3/mail/send';\n\n  const welcomeEmail = {\n    personalizations: [\n      {\n        to: [{ email: email }],\n        subject: '\uD83C\uDF89 Your AI Automation Starter Kit is Ready!',\n      },\n    ],\n    from: {\n      email: replyToEmail,\n      name: 'TECHGURU',\n    },\n    content: [\n      {\n        type: 'text/html',\n        value: `<!DOCTYPE html>\n<html>\n<head>\n  <style>\n    body { font-family: 'Inter', Arial, sans-serif; background: #080a0f; color: #f2f4fa; padding: 40px 20px; }\n    .container { max-width: 600px; margin: 0 auto; background: rgba(255,255,255,0.03); border-radius: 24px; padding: 40px; border: 1px solid rgba(255,255,255,0.1); }\n    h1 { background: linear-gradient(45deg, #4a6cf7, #a274ff); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 20px; }\n    p { line-height: 1.7; color: rgba(242,244,250,0.85); }\n    .resource { background: rgba(74,108,247,0.1); border-radius: 12px; padding: 20px; margin: 15px 0; border-left: 3px solid #4a6cf7; }\n    .resource h3 { color: #f2f4fa; margin: 0 0 8px 0; }\n    .resource p { margin: 0; font-size: 14px; }\n    .cta { display: inline-block; background: linear-gradient(135deg, #4a6cf7, #a274ff); color: #fff; padding: 14px 28px; border-radius: 12px; text-decoration: none; font-weight: 600; margin-top: 20px; }\n    .footer { margin-top: 40px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1); font-size: 13px; color: rgba(242,244,250,0.6); }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <h1>Welcome to TECHGURU! \uD83D\uDE80</h1>\n    <p>Thank you for downloading the AI Automation Starter Kit. You're now part of 2,500+ professionals who are streamlining their operations with automation.</p>\n\n    <p><strong>Here's what's inside your kit:</strong></p>\n\n    <div class=\"resource\">\n      <h3>\uD83D\uDCC4 5 GPT Prompt Templates</h3>\n      <p>Ready-to-use prompts for content creation, customer support, data analysis, code review, and meeting summaries.</p>\n    </div>\n\n    <div class=\"resource\">\n      <h3>\uD83D\uDCD8 Automation Playbook</h3>\n      <p>Step-by-step guide to identifying automation opportunities and implementing your first workflow.</p>\n    </div>\n\n    <div class=\"resource\">\n      <h3>\uD83D\uDCCA AI Tools Comparison Cheat Sheet</h3>\n      <p>Side-by-side comparison of 15+ AI tools with pricing, use cases, and recommendations.</p>\n    </div>\n\n    <div class=\"resource\">\n      <h3>\u2705 Workflow Optimization Checklist</h3>\n      <p>Audit your current processes and identify quick wins for automation.</p>\n    </div>\n\n    <p><strong>Ready to take it further?</strong></p>\n    <p>Book a free 30-minute strategy call and we'll help you identify the highest-impact automation opportunities for your business.</p>\n\n    <a href=\"https://cal.com/techguru/strategy-call\" class=\"cta\">Book Your Free Strategy Call \u2192</a>\n\n    <div class=\"footer\">\n      <p>TECHGURU | Premium Automation & AI Systems</p>\n      <p>Fort Lauderdale, FL 33308</p>\n      <p>Questions? Reply to this email or visit <a href=\"https://techguruofficial.us\" style=\"color: #4a6cf7;\">techguruofficial.us</a></p>\n      <p style=\"margin-top: 15px;\"><a href=\"https://techguruofficial.us/unsubscribe\" style=\"color: rgba(242,244,250,0.5);\">Unsubscribe</a></p>\n    </div>\n  </div>\n</body>\n</html>`,\n      },\n    ],\n  };\n\n  try {\n    const response = await fetch(url, {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${sendGridKey}`,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(welcomeEmail),\n    });\n\n    if (!response.ok) {\n      const errorText = await response.text();\n      console.error(`SendGrid welcome email failed (${response.status}):`, errorText);\n      throw new Error(`SendGrid failed: ${response.status}`);\n    }\n\n    return { success: true };\n  } catch (error) {\n    console.error('SendGrid Email Error:', error);\n    return { success: false, error: error.message };\n  }\n};\n\n/**\n * Send notification to admin about new subscriber\n */\nconst sendAdminNotification = async (email, source, sendGridKey, adminEmail, replyToEmail) => {\n  const url = 'https://api.sendgrid.com/v3/mail/send';\n\n  const adminNotification = {\n    personalizations: [\n      {\n        to: [{ email: adminEmail }],\n        subject: `\uD83D\uDCEC New Subscriber: ${email}`,\n      },\n    ],\n    from: {\n      email: replyToEmail,\n      name: 'TECHGURU System',\n    },\n    content: [\n      {\n        type: 'text/html',\n        value: `<h2>New Lead Magnet Subscriber</h2>\n<p><strong>Email:</strong> ${email}</p>\n<p><strong>Source:</strong> ${source}</p>\n<p><strong>Timestamp:</strong> ${new Date().toISOString()}</p>`,\n      },\n    ],\n  };\n\n  try {\n    await fetch(url, {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${sendGridKey}`,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(adminNotification),\n    });\n  } catch (error) {\n    // Non-critical, just log\n    console.error('Admin notification failed:', error);\n  }\n};\n\n/**\n * Get client IP from request\n */\nconst getClientIp = (request) => {\n  return (\n    request.headers.get('CF-Connecting-IP') ||\n    request.headers.get('X-Forwarded-For')?.split(',')[0] ||\n    'unknown'\n  );\n};\n\n/**\n * Main subscribe handler\n */\nexport const handleSubscribe = async (request, env, ctx, origin) => {\n  const corsHeaders = {\n    'Access-Control-Allow-Origin': origin,\n    'Access-Control-Allow-Methods': 'POST, OPTIONS',\n    'Access-Control-Allow-Headers': 'Content-Type',\n    'Content-Type': 'application/json',\n  };\n\n  try {\n    const body = await request.json();\n\n    // Validate request\n    const validation = validateSubscribeRequest(body);\n    if (!validation.valid) {\n      return new Response(\n        JSON.stringify({ error: validation.error }),\n        { status: 400, headers: corsHeaders }\n      );\n    }\n\n    // Check rate-limiting\n    const clientIp = getClientIp(request);\n    const rateLimit = await checkRateLimit(env.RATE_LIMIT, clientIp);\n\n    if (!rateLimit.allowed) {\n      return new Response(\n        JSON.stringify({\n          error: 'Too many requests. Please try again later.',\n          retryAfter: rateLimit.retryAfter,\n        }),\n        {\n          status: 429,\n          headers: {\n            ...corsHeaders,\n            'Retry-After': String(rateLimit.retryAfter),\n          },\n        }\n      );\n    }\n\n    // Check for API keys\n    const sendGridKey = env.SENDGRID_API_KEY;\n    const adminEmail = env.ADMIN_EMAIL || 'info@techguruofficial.us';\n\n    if (!sendGridKey) {\n      console.error('SENDGRID_API_KEY not configured');\n      return new Response(\n        JSON.stringify({ error: 'Email service is not properly configured' }),\n        { status: 500, headers: corsHeaders }\n      );\n    }\n\n    // Send welcome email to subscriber\n    const emailResult = await sendWelcomeEmail(\n      validation.data.email,\n      sendGridKey,\n      adminEmail\n    );\n\n    if (!emailResult.success) {\n      return new Response(\n        JSON.stringify({ error: 'Failed to send welcome email. Please try again.' }),\n        { status: 500, headers: corsHeaders }\n      );\n    }\n\n    // Send admin notification (fire and forget)\n    ctx.waitUntil(\n      sendAdminNotification(\n        validation.data.email,\n        validation.data.source,\n        sendGridKey,\n        adminEmail,\n        adminEmail\n      )\n    );\n\n    // Success response\n    return new Response(\n      JSON.stringify({\n        success: true,\n        message: 'Success! Check your inbox for the starter kit.',\n      }),\n      { status: 200, headers: corsHeaders }\n    );\n  } catch (error) {\n    console.error('Subscribe Handler Error:', error);\n    return new Response(\n      JSON.stringify({ error: 'Invalid request format' }),\n      { status: 400, headers: corsHeaders }\n    );\n  }\n};\n", "/**\n * Calendar Endpoint Handler\n * Integrates with Cal.com API for booking and availability\n *\n * Environment variables required:\n * - CALCOM_API_KEY: Your Cal.com API key (stored as secret)\n */\n\nconst CALCOM_API_BASE = 'https://api.cal.com/v1';\n\n/**\n * Get available time slots for a specific event type\n */\nconst getAvailability = async (apiKey, eventTypeId, startDate, endDate) => {\n  const url = new URL(`${CALCOM_API_BASE}/availability`);\n  url.searchParams.set('apiKey', apiKey);\n  url.searchParams.set('eventTypeId', eventTypeId);\n  url.searchParams.set('startTime', startDate);\n  url.searchParams.set('endTime', endDate);\n\n  try {\n    const response = await fetch(url.toString(), {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    });\n\n    if (!response.ok) {\n      const errorText = await response.text();\n      console.error(`Cal.com API error (${response.status}):`, errorText);\n      return { error: `Failed to fetch availability: ${response.status}` };\n    }\n\n    const data = await response.json();\n    return { slots: data.slots || data };\n  } catch (error) {\n    console.error('Cal.com availability error:', error);\n    return { error: 'Failed to connect to calendar service' };\n  }\n};\n\n/**\n * Get list of event types\n */\nconst getEventTypes = async (apiKey) => {\n  const url = `${CALCOM_API_BASE}/event-types?apiKey=${apiKey}`;\n\n  try {\n    const response = await fetch(url, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    });\n\n    if (!response.ok) {\n      return { error: `Failed to fetch event types: ${response.status}` };\n    }\n\n    const data = await response.json();\n    return { eventTypes: data.event_types || data };\n  } catch (error) {\n    console.error('Cal.com event types error:', error);\n    return { error: 'Failed to fetch event types' };\n  }\n};\n\n/**\n * Create a booking\n */\nconst createBooking = async (apiKey, bookingData) => {\n  const url = `${CALCOM_API_BASE}/bookings?apiKey=${apiKey}`;\n\n  try {\n    const response = await fetch(url, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(bookingData),\n    });\n\n    if (!response.ok) {\n      const errorText = await response.text();\n      console.error(`Cal.com booking error (${response.status}):`, errorText);\n      return { error: `Failed to create booking: ${response.status}` };\n    }\n\n    const data = await response.json();\n    return { booking: data };\n  } catch (error) {\n    console.error('Cal.com booking error:', error);\n    return { error: 'Failed to create booking' };\n  }\n};\n\n/**\n * Validate booking request\n */\nconst validateBookingRequest = (body) => {\n  const required = ['eventTypeId', 'start', 'name', 'email'];\n  \n  for (const field of required) {\n    if (!body[field]) {\n      return { valid: false, error: `Missing required field: ${field}` };\n    }\n  }\n\n  // Basic email validation\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  if (!emailRegex.test(body.email)) {\n    return { valid: false, error: 'Invalid email address' };\n  }\n\n  return { valid: true };\n};\n\n/**\n * Main calendar handler\n */\nexport const handleCalendar = async (request, env, ctx, origin) => {\n  const corsHeaders = {\n    'Access-Control-Allow-Origin': origin,\n    'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n    'Access-Control-Allow-Headers': 'Content-Type',\n    'Content-Type': 'application/json',\n  };\n\n  const url = new URL(request.url);\n  const apiKey = env.CALCOM_API_KEY;\n\n  if (!apiKey) {\n    console.error('CALCOM_API_KEY not configured');\n    return new Response(\n      JSON.stringify({ error: 'Calendar service is not configured' }),\n      { status: 500, headers: corsHeaders }\n    );\n  }\n\n  try {\n    // GET /api/calendar/availability - Get available slots\n    if (request.method === 'GET' && url.pathname.includes('/availability')) {\n      const eventTypeId = url.searchParams.get('eventTypeId');\n      const startDate = url.searchParams.get('startDate') || new Date().toISOString();\n      const endDate = url.searchParams.get('endDate') || \n        new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(); // Default 7 days\n\n      if (!eventTypeId) {\n        return new Response(\n          JSON.stringify({ error: 'eventTypeId is required' }),\n          { status: 400, headers: corsHeaders }\n        );\n      }\n\n      const result = await getAvailability(apiKey, eventTypeId, startDate, endDate);\n      \n      if (result.error) {\n        return new Response(\n          JSON.stringify({ error: result.error }),\n          { status: 500, headers: corsHeaders }\n        );\n      }\n\n      return new Response(\n        JSON.stringify({ slots: result.slots }),\n        { status: 200, headers: corsHeaders }\n      );\n    }\n\n    // GET /api/calendar/event-types - Get available event types\n    if (request.method === 'GET' && url.pathname.includes('/event-types')) {\n      const result = await getEventTypes(apiKey);\n      \n      if (result.error) {\n        return new Response(\n          JSON.stringify({ error: result.error }),\n          { status: 500, headers: corsHeaders }\n        );\n      }\n\n      return new Response(\n        JSON.stringify({ eventTypes: result.eventTypes }),\n        { status: 200, headers: corsHeaders }\n      );\n    }\n\n    // POST /api/calendar/book - Create a booking\n    if (request.method === 'POST' && url.pathname.includes('/book')) {\n      const body = await request.json();\n      \n      const validation = validateBookingRequest(body);\n      if (!validation.valid) {\n        return new Response(\n          JSON.stringify({ error: validation.error }),\n          { status: 400, headers: corsHeaders }\n        );\n      }\n\n      const bookingData = {\n        eventTypeId: parseInt(body.eventTypeId),\n        start: body.start,\n        responses: {\n          name: body.name,\n          email: body.email,\n          notes: body.notes || '',\n        },\n        timeZone: body.timeZone || 'America/New_York',\n        language: body.language || 'en',\n        metadata: {},\n      };\n\n      const result = await createBooking(apiKey, bookingData);\n      \n      if (result.error) {\n        return new Response(\n          JSON.stringify({ error: result.error }),\n          { status: 500, headers: corsHeaders }\n        );\n      }\n\n      return new Response(\n        JSON.stringify({ \n          success: true, \n          message: 'Booking confirmed!',\n          booking: result.booking \n        }),\n        { status: 200, headers: corsHeaders }\n      );\n    }\n\n    return new Response(\n      JSON.stringify({ error: 'Invalid calendar endpoint' }),\n      { status: 404, headers: corsHeaders }\n    );\n\n  } catch (error) {\n    console.error('Calendar Handler Error:', error);\n    return new Response(\n      JSON.stringify({ error: 'Invalid request format' }),\n      { status: 400, headers: corsHeaders }\n    );\n  }\n};\n", "/**\r\n * Main Router for TechGuru API Workers\r\n * Routes: /api/chat, /api/contact, /api/subscribe, and /api/calendar/*\r\n */\r\n\r\nimport { handleChat } from './chat.js';\r\nimport { handleContact } from './contact.js';\r\nimport { handleSubscribe } from './subscribe.js';\r\nimport { handleCalendar } from './calendar.js';\r\n\r\n/**\r\n * CORS headers with domain restriction\r\n */\r\nconst getCorsHeaders = (origin) => {\r\n  const allowedOrigins = [\r\n    'https://techguruofficial.us',\r\n    'https://www.techguruofficial.us',\r\n    'http://localhost:8000', // for local dev\r\n    'http://127.0.0.1:8000', // for local dev\r\n    'http://localhost:3000', // for local dev\r\n  ];\r\n\r\n  const isAllowed = allowedOrigins.includes(origin);\r\n\r\n  return {\r\n    'Access-Control-Allow-Origin': isAllowed ? origin : 'https://techguruofficial.us',\r\n    'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\r\n    'Access-Control-Allow-Headers': 'Content-Type',\r\n    'Access-Control-Max-Age': '86400',\r\n  };\r\n};\r\n\r\n/**\r\n * Main fetch handler\r\n */\r\nexport default {\r\n  async fetch(request, env, ctx) {\r\n    const url = new URL(request.url);\r\n    const origin = request.headers.get('Origin') || 'https://techguruofficial.us';\r\n\r\n    // Handle CORS preflight\r\n    if (request.method === 'OPTIONS') {\r\n      return new Response(null, {\r\n        status: 204,\r\n        headers: getCorsHeaders(origin),\r\n      });\r\n    }\r\n\r\n    // Route to appropriate handler\r\n    if (url.pathname === '/api/health' && request.method === 'GET') {\r\n      return new Response(\r\n        JSON.stringify({ status: 'ok', message: 'TechGuru API is running' }),\r\n        {\r\n          status: 200,\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            ...getCorsHeaders(origin),\r\n          },\r\n        }\r\n      );\r\n    }\r\n\r\n    if (url.pathname === '/api/chat' && request.method === 'POST') {\r\n      return handleChat(request, env, ctx, origin);\r\n    }\r\n\r\n    if (url.pathname === '/api/contact' && request.method === 'POST') {\r\n      return handleContact(request, env, ctx, origin);\r\n    }\r\n\r\n    if (url.pathname === '/api/subscribe' && request.method === 'POST') {\r\n      return handleSubscribe(request, env, ctx, origin);\r\n    }\r\n\r\n    // Calendar endpoints\r\n    if (url.pathname.startsWith('/api/calendar')) {\r\n      return handleCalendar(request, env, ctx, origin);\r\n    }\r\n\r\n    // 404 for unmatched routes\r\n    return new Response(\r\n      JSON.stringify({ error: 'Endpoint not found' }),\r\n      {\r\n        status: 404,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...getCorsHeaders(origin),\r\n        },\r\n      }\r\n    );\r\n  },\r\n};\r\n"],
  "mappings": "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",
  "names": ["isValidEmail", "checkRateLimit", "getClientIp"]
}
